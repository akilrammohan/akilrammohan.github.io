---
import BaseLayout from '../layouts/BaseLayout.astro';

// Placeholder book data - will be replaced with Goodreads API integration
const books = [
  {
    title: "The Design of Everyday Things",
    author: "Don Norman",
    rating: 5,
    cover: "https://covers.openlibrary.org/b/id/8091016-M.jpg",
    review: "A foundational book on human-centered design. Changed how I think about interfaces.",
  },
  {
    title: "Thinking, Fast and Slow",
    author: "Daniel Kahneman",
    rating: 4,
    cover: "https://covers.openlibrary.org/b/id/8256533-M.jpg",
    review: "Fascinating exploration of cognitive biases and decision-making.",
  },
  {
    title: "The Pragmatic Programmer",
    author: "David Thomas & Andrew Hunt",
    rating: 5,
    cover: "https://covers.openlibrary.org/b/id/10361834-M.jpg",
    review: "Essential reading for any software developer. Timeless advice.",
  },
];

function renderStars(rating: number) {
  return Array(5).fill(0).map((_, i) => i < rating ? 'filled' : 'empty');
}
---

<BaseLayout title="Bookshelf | Akil Rammohan">
  <h1>Bookshelf</h1>

  <p class="intro">
    Books I've been reading. Eventually this will pull from my <a href="https://www.goodreads.com/user/show/109135301-akil-rammohan" target="_blank" rel="noopener noreferrer">Goodreads</a> account.
  </p>

  <div class="book-grid">
    {books.map(book => (
      <article class="book-card">
        <img src={book.cover} alt={`Cover of ${book.title}`} class="book-cover" />
        <div class="book-info">
          <h2 class="book-title">{book.title}</h2>
          <p class="book-author">{book.author}</p>
          <div class="book-rating">
            {renderStars(book.rating).map(star => (
              <span class={`star ${star}`}>&#9733;</span>
            ))}
          </div>
          <p class="book-review">{book.review}</p>
        </div>
      </article>
    ))}
  </div>
</BaseLayout>

<style>
  h1 {
    font-size: 2rem;
    font-weight: normal;
    margin-bottom: 1rem;
  }

  .intro {
    margin-bottom: 2rem;
    color: var(--text-muted);
  }

  .book-grid {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .book-card {
    display: flex;
    gap: 1.5rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #eee;
  }

  .book-card:last-child {
    border-bottom: none;
  }

  .book-cover {
    width: 100px;
    height: 150px;
    object-fit: cover;
    border-radius: 4px;
    flex-shrink: 0;
  }

  .book-info {
    flex: 1;
  }

  .book-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
  }

  .book-author {
    color: var(--text-muted);
    margin-bottom: 0.5rem;
  }

  .book-rating {
    margin-bottom: 0.5rem;
  }

  .star {
    font-size: 1rem;
  }

  .star.filled {
    color: var(--color-tri-4);
  }

  .star.empty {
    color: #ddd;
  }

  .book-review {
    font-size: 0.95rem;
    line-height: 1.5;
  }

  @media (max-width: 480px) {
    .book-card {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .book-cover {
      width: 120px;
      height: 180px;
    }
  }
</style>
